# Generated by go2rpm
%bcond_without check
%bcond_with bootstrap

# https://github.com/GoogleCloudPlatform/google-cloud-go
%global goipath         cloud.google.com/go
%global forgeurl        https://github.com/GoogleCloudPlatform/google-cloud-go
Version:                0.100.0

%gometa

%if %{without bootstrap}
%global goipaths0       cloud.google.com/go
%global goipathsex0     cloud.google.com/go/compute
%endif

%global goipaths1       cloud.google.com/go/compute

%global common_description %{expand:
Go packages for Google Cloud Platform services.}

%global golicenses      LICENSE
%global godocs          AUTHORS CODE_OF_CONDUCT.md CONTRIBUTING.md CONTRIBUTORS RELEASING.md old-news.md CHANGES.md README.md

Name:           %{goname}
Release:        %autorelease
Summary:        Google Cloud client libraries for Go

# Upstream license specification: Apache-2.0
License:        ASL 2.0
URL:            %{gourl}
Source0:        %{gosource}

%if %{without bootstrap}
BuildRequires:  golang(github.com/golang/mock/gomock)
BuildRequires:  golang(github.com/golang/protobuf/proto)
BuildRequires:  golang(github.com/golang/protobuf/ptypes)
BuildRequires:  golang(github.com/golang/protobuf/ptypes/any)
BuildRequires:  golang(github.com/golang/protobuf/ptypes/duration)
BuildRequires:  golang(github.com/golang/protobuf/ptypes/empty)
BuildRequires:  golang(github.com/golang/protobuf/ptypes/struct)
BuildRequires:  golang(github.com/golang/protobuf/ptypes/timestamp)
BuildRequires:  golang(github.com/golang/protobuf/ptypes/wrappers)
BuildRequires:  golang(github.com/google/btree)
BuildRequires:  golang(github.com/google/go-cmp/cmp)
BuildRequires:  golang(github.com/google/go-cmp/cmp/cmpopts)
BuildRequires:  golang(github.com/google/go-github/v35/github)
BuildRequires:  golang(github.com/google/martian/v3)
BuildRequires:  golang(github.com/google/martian/v3/fifo)
BuildRequires:  golang(github.com/google/martian/v3/httpspec)
BuildRequires:  golang(github.com/google/martian/v3/martianhttp)
BuildRequires:  golang(github.com/google/martian/v3/martianlog)
BuildRequires:  golang(github.com/google/martian/v3/mitm)
BuildRequires:  golang(github.com/google/pprof/profile)
BuildRequires:  golang(github.com/google/uuid)
BuildRequires:  golang(github.com/googleapis/gax-go/v2)
BuildRequires:  golang(github.com/shurcooL/githubv4)
BuildRequires:  golang(github.com/yuin/goldmark)
BuildRequires:  golang(github.com/yuin/goldmark/ast)
BuildRequires:  golang(github.com/yuin/goldmark/renderer)
BuildRequires:  golang(github.com/yuin/goldmark/renderer/html)
BuildRequires:  golang(github.com/yuin/goldmark/util)
BuildRequires:  golang(go.opencensus.io/plugin/ocgrpc)
BuildRequires:  golang(go.opencensus.io/stats)
BuildRequires:  golang(go.opencensus.io/stats/view)
BuildRequires:  golang(go.opencensus.io/tag)
BuildRequires:  golang(go.opencensus.io/trace)
BuildRequires:  golang(golang.org/x/oauth2)
BuildRequires:  golang(golang.org/x/oauth2/google)
BuildRequires:  golang(golang.org/x/oauth2/jwt)
BuildRequires:  golang(golang.org/x/sync/errgroup)
BuildRequires:  golang(golang.org/x/sync/semaphore)
BuildRequires:  golang(golang.org/x/sys/execabs)
BuildRequires:  golang(golang.org/x/text/language)
BuildRequires:  golang(golang.org/x/time/rate)
BuildRequires:  golang(golang.org/x/tools/go/packages)
BuildRequires:  golang(golang.org/x/xerrors)
BuildRequires:  golang(google.golang.org/api/bigquery/v2)
BuildRequires:  golang(google.golang.org/api/clouddebugger/v2)
BuildRequires:  golang(google.golang.org/api/cloudresourcemanager/v1)
BuildRequires:  golang(google.golang.org/api/compute/v1)
BuildRequires:  golang(google.golang.org/api/container/v1)
BuildRequires:  golang(google.golang.org/api/googleapi)
BuildRequires:  golang(google.golang.org/api/iterator)
BuildRequires:  golang(google.golang.org/api/option)
BuildRequires:  golang(google.golang.org/api/option/internaloption)
BuildRequires:  golang(google.golang.org/api/storage/v1)
BuildRequires:  golang(google.golang.org/api/support/bundler)
BuildRequires:  golang(google.golang.org/api/translate/v2)
BuildRequires:  golang(google.golang.org/api/transport)
BuildRequires:  golang(google.golang.org/api/transport/grpc)
BuildRequires:  golang(google.golang.org/api/transport/http)
BuildRequires:  golang(google.golang.org/genproto/googleapis/analytics/admin/v1alpha)
BuildRequires:  golang(google.golang.org/genproto/googleapis/analytics/data/v1alpha)
BuildRequires:  golang(google.golang.org/genproto/googleapis/api/httpbody)
BuildRequires:  golang(google.golang.org/genproto/googleapis/api/label)
BuildRequires:  golang(google.golang.org/genproto/googleapis/api/metric)
BuildRequires:  golang(google.golang.org/genproto/googleapis/api/monitoredres)
BuildRequires:  golang(google.golang.org/genproto/googleapis/api/serviceconfig)
BuildRequires:  golang(google.golang.org/genproto/googleapis/api/servicecontrol/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/api/servicemanagement/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/api/serviceusage/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/appengine/logging/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/appengine/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/area120/tables/v1alpha1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/bigtable/admin/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/bigtable/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/accessapproval/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/apigateway/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/asset/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/asset/v1p2beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/asset/v1p5beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/assuredworkloads/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/audit)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/automl/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/automl/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/bigquery/connection/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/bigquery/connection/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/bigquery/datatransfer/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/bigquery/reservation/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/bigquery/reservation/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/bigquery/storage/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/bigquery/storage/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/bigquery/storage/v1beta2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/billing/budgets/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/billing/budgets/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/billing/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/binaryauthorization/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/channel/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/clouddms/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/datacatalog/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/datacatalog/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/datalabeling/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/dataproc/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/dataproc/v1beta2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/dataqna/v1alpha)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/dialogflow/cx/v3)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/dialogflow/cx/v3beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/dialogflow/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/documentai/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/documentai/v1beta3)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/domains/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/functions/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/gaming/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/gaming/v1beta)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/gkehub/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/iot/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/kms/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/language/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/language/v1beta2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/managedidentities/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/mediatranslation/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/memcache/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/memcache/v1beta2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/metastore/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/metastore/v1alpha)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/metastore/v1beta)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/networkconnectivity/v1alpha1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/notebooks/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/orgpolicy/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/osconfig/agentendpoint/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/osconfig/agentendpoint/v1beta)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/osconfig/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/osconfig/v1alpha)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/osconfig/v1beta)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/oslogin/common)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/oslogin/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/oslogin/v1beta)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/phishingprotection/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/policytroubleshooter/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/pubsublite/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/recaptchaenterprise/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/recaptchaenterprise/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/recommendationengine/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/recommender/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/recommender/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/redis/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/redis/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/resourcemanager/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/resourcesettings/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/retail/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/scheduler/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/scheduler/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/secretmanager/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/secretmanager/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/security/privateca/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/security/privateca/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/securitycenter/settings/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/securitycenter/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/securitycenter/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/securitycenter/v1p1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/servicedirectory/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/servicedirectory/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/speech/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/speech/v1p1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/talent/v4)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/talent/v4beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/tasks/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/tasks/v2beta2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/tasks/v2beta3)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/texttospeech/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/translate/v3)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/video/transcoder/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/videointelligence/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/videointelligence/v1beta2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/vision/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/vision/v1p1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/webrisk/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/webrisk/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/websecurityscanner/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/workflows/executions/v1beta)
BuildRequires:  golang(google.golang.org/genproto/googleapis/cloud/workflows/v1beta)
BuildRequires:  golang(google.golang.org/genproto/googleapis/container/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/datastore/admin/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/datastore/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/devtools/artifactregistry/v1beta2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/devtools/cloudbuild/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/devtools/clouddebugger/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/devtools/clouderrorreporting/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/devtools/cloudprofiler/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/devtools/cloudtrace/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/devtools/cloudtrace/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/devtools/containeranalysis/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/devtools/containeranalysis/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/devtools/containeranalysis/v1beta1/grafeas)
BuildRequires:  golang(google.golang.org/genproto/googleapis/firestore/admin/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/firestore/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/firestore/v1beta1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/gapic/metadata)
BuildRequires:  golang(google.golang.org/genproto/googleapis/grafeas/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/iam/admin/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/iam/credentials/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/iam/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/logging/type)
BuildRequires:  golang(google.golang.org/genproto/googleapis/logging/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/longrunning)
BuildRequires:  golang(google.golang.org/genproto/googleapis/monitoring/dashboard/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/monitoring/v3)
BuildRequires:  golang(google.golang.org/genproto/googleapis/privacy/dlp/v2)
BuildRequires:  golang(google.golang.org/genproto/googleapis/pubsub/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/rpc/code)
BuildRequires:  golang(google.golang.org/genproto/googleapis/rpc/errdetails)
BuildRequires:  golang(google.golang.org/genproto/googleapis/rpc/status)
BuildRequires:  golang(google.golang.org/genproto/googleapis/spanner/admin/database/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/spanner/admin/instance/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/spanner/v1)
BuildRequires:  golang(google.golang.org/genproto/googleapis/type/expr)
BuildRequires:  golang(google.golang.org/genproto/googleapis/type/latlng)
BuildRequires:  golang(google.golang.org/genproto/protobuf/field_mask)
BuildRequires:  golang(google.golang.org/grpc)
BuildRequires:  golang(google.golang.org/grpc/codes)
BuildRequires:  golang(google.golang.org/grpc/credentials)
BuildRequires:  golang(google.golang.org/grpc/keepalive)
BuildRequires:  golang(google.golang.org/grpc/metadata)
BuildRequires:  golang(google.golang.org/grpc/status)
BuildRequires:  golang(google.golang.org/protobuf/encoding/protojson)
BuildRequires:  golang(google.golang.org/protobuf/encoding/protowire)
BuildRequires:  golang(google.golang.org/protobuf/proto)
BuildRequires:  golang(google.golang.org/protobuf/reflect/protoreflect)
BuildRequires:  golang(google.golang.org/protobuf/runtime/protoimpl)
BuildRequires:  golang(google.golang.org/protobuf/types/known/durationpb)
BuildRequires:  golang(google.golang.org/protobuf/types/known/emptypb)
BuildRequires:  golang(google.golang.org/protobuf/types/known/structpb)
BuildRequires:  golang(google.golang.org/protobuf/types/known/timestamppb)
BuildRequires:  golang(gopkg.in/src-d/go-git.v4)
BuildRequires:  golang(gopkg.in/yaml.v2)
BuildRequires:  golang(rsc.io/binaryregexp)

%if %{with check}
# Tests
BuildRequires:  golang(github.com/golang/protobuf/jsonpb)
BuildRequires:  golang(google.golang.org/api/iterator/testing)
BuildRequires:  golang(google.golang.org/grpc/peer)
BuildRequires:  golang(google.golang.org/protobuf/testing/protocmp)
%endif
%endif

%description
%{common_description}

%gopkg

%prep
%goprep
# Change import paths to account for the versions in Fedora
sed \
    -e "s|github.com/google/go-github/v33|github.com/google/go-github/v35|" \
    -e "s|google.golang.org/genproto/googleapis/cloud/video/transcoder/v1beta1|google.golang.org/genproto/googleapis/cloud/video/transcoder/v1|" \
    -i $(find . -name "*.go" -type f)

%install
%gopkginstall

%if %{without bootstrap}
%if %{with check}
%check
for test in "TestIntegration" \
            "TestIntegration_GetGrafeasClient" \
            "TestParse" \
            "TestGoldens" \
            "TestNewPublisherCreatesImpl" \
            "TestNewSubscriberCreatesCorrectImpl" \
            "TestCallBuilders" \
            "TestSetFromProtoValueErrors" \
            "TestTimestamp" \
            "TestFlowControllerUnboundedBytes" \
            "TestCreateGetPutPatchListInstance" \
            "TestCreateGetRemoveSecurityPolicies" \
            "TestPaginationWithMaxRes" \
            "TestPaginationDefault" \
            "TestPaginationMapResponse" \
            "TestPaginationMapResponseMaxRes" \
            "TestCapitalLetter" \
            "TestInstanceGroupResize" \
            "TestClient_CustomRetry" \
            "TestAssigningSubscriberAddRemovePartitions" \
; do
awk -i inplace '/^func.*'"$test"'\(/ { print; print "\tt.Skip(\"disabled failing test\")"; next}1' $(grep -rl $test)
done
%gocheck -d storage -t cmd \
%ifarch %{ix86} %{arm32}
         -d pubsub -d pubsublite/internal/wire -d pubsublite/pscompat -d spanner/spansql -d bigquery/storage/managedwriter \
%endif
%endif
%endif

%gopkgfiles

%changelog
%autochangelog
